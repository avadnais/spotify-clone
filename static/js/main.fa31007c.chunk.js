(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){},108:function(e,t,a){},109:function(e,t,a){},114:function(e,t,a){},115:function(e,t,a){},116:function(e,t,a){},117:function(e,t,a){},118:function(e,t,a){},121:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(25),r=a.n(c),o=(a(103),a(21)),s=a.n(o),i=a(26),u=a(7),m=(a(105),a(106),"".concat("http://accounts.spotify.com/authorize","?client_id=").concat("b8f893a2affb49d7b73943e5711bd383","&redirect_uri=").concat("https://avadnais.github.io/spotify-clone","&scope=").concat(["user-read-playback-state","user-modify-playback-state","user-read-currently-playing","user-read-recently-played","user-top-read","playlist-read-private","streaming"].join("%20"),"&response_type=token&show_dialog=true")),E=function(){return l.a.createElement("div",{className:"login"},l.a.createElement("img",{src:"https://storage.googleapis.com/pr-newsroom-wp/1/2018/11/Spotify_Logo_CMYK_White.png",alt:"logo"}),l.a.createElement("a",{href:m},"Login with Spotify"))},d=a(69),p=a.n(d);a(107),a(108),a(109);var f=function(e){var t=e.playlist,a=e.Icon,n=e.onClick,c=(e.id,e.title);return l.a.createElement("div",{onClick:function(){n(t)},className:"sideBarOption"},a&&l.a.createElement(a,{className:"sideBarOption_icon"}),a?l.a.createElement("h4",null,c):l.a.createElement("p",null,c))},_=a(70),v=a.n(_),y=a(43),g=a.n(y),S=a(75),T=a.n(S),b=Object(n.createContext)(),h=function(e){var t=e.initialState,a=e.reducer,c=e.children;return l.a.createElement(b.Provider,{value:Object(n.useReducer)(a,t)},c)},N=function(){return Object(n.useContext)(b)};var k=function(e){var t,a=e.spotify,n=N(),c=Object(u.a)(n,2),r=c[0].playlists,o=c[1],s=function(e){a.getPlaylist(e.id).then(function(e){o({type:"SET_SELECTED_PLAYLIST",selected_playlist:e})})};return l.a.createElement("div",{className:"sidebar"},l.a.createElement("img",{src:"https://storage.googleapis.com/pr-newsroom-wp/1/2018/11/Spotify_Logo_CMYK_White.png",alt:"logo",className:"logo"}),l.a.createElement(f,{title:"Home",Icon:v.a}),l.a.createElement(f,{title:"Search",Icon:g.a}),l.a.createElement(f,{title:"Your Library",Icon:T.a}),l.a.createElement("br",null),l.a.createElement("strong",{className:"sidebar_title"},"Playlists"),l.a.createElement("hr",null),null===r||void 0===r?void 0:null===(t=r.items)||void 0===t?void 0:t.map(function(e){return l.a.createElement(f,{key:e.id,title:e.name,onClick:s,playlist:e})}))},C=(a(114),a(115),a(147));var O=function(e){var t,a=e.spotify,n=N(),c=Object(u.a)(n,2),r=c[0].user,o=c[1];return l.a.createElement("div",{className:"header"},l.a.createElement("div",{className:"header_left"},l.a.createElement(g.a,null),l.a.createElement("input",{id:"searchInput",placeholder:"Search for artists, songs, or podcasts",type:"text",onChange:function(e){""===e.target.value&&o({type:"SET_SEARCH_RESULTS",search_results:null}),a.search(e.target.value,["artist","playlist","track","album"]).then(function(e){o({type:"SET_SEARCH_RESULTS",search_results:e})})}})),l.a.createElement("div",{className:"header_right"},l.a.createElement(C.a,{src:null===r||void 0===r?void 0:null===(t=r.images[0])||void 0===t?void 0:t.url,alt:null===r||void 0===r?void 0:r.display_name}),l.a.createElement("div",{className:"header_right_text"},l.a.createElement("h4",null,null===r||void 0===r?void 0:r.display_name),l.a.createElement("p",{onClick:function(){window.localStorage.clear(),document.getElementById("logout").innerHTML="Login not saved"},id:"logout"},"Don't save login"))))},L=a(77),R=a.n(L),j=a(61),w=a.n(j),A=a(78),P=a.n(A);a(116);var I=function(e){var t,a,n=e.item,c=e.playSong,r=e.i,o=n.track,s=N(),i=Object(u.a)(s,1)[0].track;return l.a.createElement("div",{id:o.id,className:"songRow",onClick:function(){c(n)}},l.a.createElement("div",{className:"songRow_index_container",id:"index_container_"+o.id},o.id===(null===i||void 0===i?void 0:i.id)?l.a.createElement("div",{className:"songRow_audioWave",id:"songRow_audioWave"},l.a.createElement("span",null),l.a.createElement("span",null),l.a.createElement("span",null),l.a.createElement("span",null),l.a.createElement("span",null)):l.a.createElement("h4",{className:"songRow_index"},r+1)),l.a.createElement("img",{className:"songRow_album",src:null===o||void 0===o?void 0:null===(t=o.album)||void 0===t?void 0:null===(a=t.images[0])||void 0===a?void 0:a.url,alt:""}),l.a.createElement("div",{className:"songRow_info"},l.a.createElement("h1",null,o.name),l.a.createElement("p",null,o.artists.map(function(e){return e.name}).join(", ")," -"," ",o.album.name)))},x=(a(117),a(76)),D=a.n(x),Y=a(144),U=a(149);function K(e){var t=e.track,a=e.play,c=Object(n.useState)(!1),r=Object(u.a)(c,2),o=r[0],s=r[1],i=N(),m=Object(u.a)(i,1)[0].playlists,E=function(){s(!o)};return l.a.createElement("div",{id:t.id,className:"searchResult_song"},l.a.createElement(D.a,{className:"searchResult_song_icon",onClick:E}),l.a.createElement(Y.a,{open:o,onClose:E,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description"},l.a.createElement(U.a,{className:"modalBox"},l.a.createElement("h3",null,"Add ",t.name," to..."),m.items.map(function(e){return l.a.createElement("p",null,e.name)}))),l.a.createElement("img",{className:"searchResult_song_album",src:t.album.images[0].url,alt:""}),l.a.createElement("div",{className:"searchResult_song_info",onClick:function(){a(t,"track",t.id)}},l.a.createElement("p",null,l.a.createElement("strong",null,t.name)," "," - ",t.artists.map(function(e){return e.name}).join(", ")," -"," ",t.album.name)))}function M(e){var t=e.album,a=e.play;return l.a.createElement("div",{id:t.id,className:"searchResults_album",onClick:function(){a(t,"album",t.id)}},l.a.createElement("img",{className:"searchResults_album_albumImg",src:t.images[0].url,alt:""}),l.a.createElement("div",{className:"searchResults_album_info"},l.a.createElement("h1",null,t.name),l.a.createElement("p",null,t.artists.map(function(e){return e.name}).join(", "))))}function F(e){var t=e.playlist,a=e.play;return l.a.createElement("div",{id:t.id,className:"searchResults_playlist",onClick:function(){a(t,"playlist",t.id)}},l.a.createElement("img",{className:"searchResults_playlist_img",src:t.images[0]?t.images[0].url:"https://developer.spotify.com/assets/branding-guidelines/icon3@2x.png",alt:""}),l.a.createElement("h3",null,t.name))}var H=function(e){var t,a,c,r,o,m=e.spotify,E=N(),d=Object(u.a)(E,2),p=d[0],f=p.selected_playlist,_=p.playing,v=p.search_results,y=d[1],g=function(e,t,a){console.log(e),document.getElementById("searchInput").value="",y({type:"SET_SEARCH_RESULTS",search_results:null});var n=function(){var e=Object(i.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m.getMyCurrentPlaybackState().then(function(e){y({type:"SET_SELECTED_TRACK",track:e.item})}));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();"track"===t?m.play({uris:["spotify:".concat(t,":").concat(a)]}):m.play({context_uri:"spotify:".concat(t,":").concat(a)}).then(function(){m.getPlaylist(a).then(function(e){y({type:"SET_SELECTED_PLAYLIST",selected_playlist:e})}),_||y({type:"SET_PLAYING",playing:!0}),y({type:"SET_INDEX",index:0})}),setTimeout(function(){return n()},700)},S=function(e){y({type:"SET_SELECTED_TRACK",track:e.track}),_||y({type:"SET_PLAYING",playing:!0}),m.play({uris:["spotify:track:".concat(e.track.id)]}).then(function(){console.log("%cPlayback started","color:green")})};return Object(n.useEffect)(function(){console.log("%cBODY RENDERED in useEffect []","color: purple"),function(){var e=Object(i.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.getUserPlaylists().then(function(e){y({type:"SET_PLAYLISTS",playlists:e}),m.getPlaylist(e.items[0].id).then(function(e){y({type:"SET_SELECTED_PLAYLIST",selected_playlist:e})})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[m,y]),v?l.a.createElement("div",{className:"body"},l.a.createElement(O,{spotify:m}),l.a.createElement("h1",null,"Search results"),l.a.createElement("div",{className:"searchResults"},l.a.createElement("div",{className:"searchResults_tracks"},null===v||void 0===v?void 0:null===(t=v.tracks)||void 0===t?void 0:t.items.map(function(e,t){return l.a.createElement(K,{i:t,track:e,play:g})})),l.a.createElement("h2",null,"Albums"),l.a.createElement("hr",null),l.a.createElement("div",{className:"searchResults_albums"},null===v||void 0===v?void 0:null===(a=v.albums)||void 0===a?void 0:a.items.map(function(e){return l.a.createElement(M,{album:e,play:g})})),l.a.createElement("h2",null,"Artists"),l.a.createElement("hr",null),l.a.createElement("div",{className:"searchResults_artists"},null===v||void 0===v?void 0:null===(c=v.artists)||void 0===c?void 0:c.items.map(function(e){return l.a.createElement("p",null,e.name)})),l.a.createElement("h2",null,"Playlists"),l.a.createElement("hr",null),l.a.createElement("div",{className:"searchResults_playlists"},null===v||void 0===v?void 0:null===(r=v.playlists)||void 0===r?void 0:r.items.map(function(e){return l.a.createElement(F,{playlist:e,play:g})})))):l.a.createElement("div",{className:"body"},l.a.createElement(O,{spotify:m}),l.a.createElement("div",{className:"body_info"},l.a.createElement("img",{className:"album_cover",src:null===f||void 0===f?void 0:f.images[0].url,alt:"Album cover"}),l.a.createElement("div",{className:"body_infoText"},l.a.createElement("strong",null,"PLAYLIST"),l.a.createElement("h2",null,null===f||void 0===f?void 0:f.name),l.a.createElement("p",null,null===f||void 0===f?void 0:f.description),l.a.createElement("div",{className:"numLikes"},l.a.createElement(w.a,{className:"likes",fontSize:"small"}),l.a.createElement("p",null,null===f||void 0===f?void 0:f.followers.total)))),l.a.createElement("div",{className:"body_songs"},l.a.createElement("div",{className:"body_icons"},l.a.createElement(R.a,{className:"body_shuffle body_green",onClick:function(){g(f,"playlist",f.id)}}),l.a.createElement(w.a,{className:"body_green",fontSize:"large"}),l.a.createElement(P.a,null)),null===f||void 0===f?void 0:null===(o=f.tracks)||void 0===o?void 0:o.items.map(function(e,t){return l.a.createElement(I,{i:t,item:e,playSong:S})})))},B=(a(118),a(82)),G=a.n(B),z=a(80),V=a.n(z),W=a(83),X=a.n(W),J=a(79),q=a.n(J),Q=a(62),Z=a.n(Q),$=a(85),ee=a.n($),te=a(148),ae=a(145),ne=a(81),le=a.n(ne),ce=a(84),re=a.n(ce),oe=a(143);var se=function(e){var t,a,c,r,o=e.spotify,m=N(),E=Object(u.a)(m,2),d=E[0],p=d.volume,f=d.track,_=d.playing,v=(d.selected_playlist,d.index,d.shuffle),y=d.repeat,g=E[1];Object(n.useEffect)(function(){console.log("%cFOOTER RENDERED","color: yellow"),function(){var e=Object(i.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.getMyCurrentPlaybackState().then(function(e){try{console.log("%cgetmyCurrentPlaybackState():","color:yellow"),console.log(e),g({type:"SET_SELECTED_TRACK",track:e.item}),g({type:"SET_PLAYING",playing:e.item.is_playing}),g({type:"SET_VOLUME",volume:parseInt(e.device.volume_percent)}),g({type:"SET_SHUFFLE_STATE",shuffle:e.shuffle_state}),g({type:"SET_REPEAT_STATE",repeat:e.repeat_state})}catch(t){console.log(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()(),console.log("%cTRACK:".concat(f),"color: yellow")},[o,g]);var S=function(){_?(o.pause(),g({type:"SET_PLAYING",playing:!1})):(o.play(),g({type:"SET_PLAYING",playing:!0}))},T=function(){var e;"off"===y?e="context":"context"===y?e="track":"track"===y&&(e="off"),o.setRepeat(e),g({type:"SET_REPEAT_STATE",repeat:e})};return l.a.createElement("div",{className:"footer"},l.a.createElement("div",{className:"footer"},l.a.createElement("div",{className:"footer_left"},l.a.createElement("img",{src:null===f||void 0===f?void 0:null===(t=f.album)||void 0===t?void 0:null===(a=t.images[0])||void 0===a?void 0:a.url,alt:null===f||void 0===f?void 0:f.name,className:"footer_albumLogo"}),f&&l.a.createElement("div",{className:"footer_songInfo"},l.a.createElement("h4",null,f.name),l.a.createElement("p",null,null===f||void 0===f?void 0:null===(c=f.artists)||void 0===c?void 0:c.map(function(e){return e.name}).join(", ")))),l.a.createElement("div",{className:"footer_center"},l.a.createElement("div",{className:"footer_icons"},l.a.createElement(q.a,{className:v&&"footer_green",onClick:function(){o.setShuffle(!v),g({type:"SET_SHUFFLE_STATE",shuffle:!v})}}),l.a.createElement(V.a,{className:"footer_icon",onClick:function(){o.skipToPrevious().then(function(){setTimeout(function(){o.getMyCurrentPlaybackState().then(function(e){console.log(e),g({type:"SET_SELECTED_TRACK",track:e.item}),g({type:"SET_REPEAT_STATE",repeat:e.repeat_state})})},250)})}}),_?l.a.createElement(le.a,{fontSize:"large",className:"footer_icon",onClick:S}):l.a.createElement(G.a,{fontSize:"large",className:"footer_icon",onClick:S}),l.a.createElement(X.a,{className:"footer_icon",onClick:function(){o.skipToNext().then(function(){setTimeout(function(){o.getMyCurrentPlaybackState().then(function(e){console.log(e),g({type:"SET_SELECTED_TRACK",track:e.item}),g({type:"SET_REPEAT_STATE",repeat:e.repeat_state})})},250)})}}),"off"===y&&l.a.createElement(Z.a,{className:"footer_icon",onClick:T}),"context"===y&&l.a.createElement(Z.a,{className:"footer_green",onClick:T}),"track"===y&&l.a.createElement(re.a,{className:"footer_green",onClick:T}))),l.a.createElement("div",{className:"footer_right"},l.a.createElement(te.a,{container:!0,spacing:2},l.a.createElement(te.a,{item:!0},l.a.createElement(ee.a,null)),l.a.createElement(te.a,{item:!0},l.a.createElement(oe.a,null)),l.a.createElement(te.a,{item:!0,xs:!0},l.a.createElement(ae.a,{min:0,max:100,value:p,step:1,onChange:function(e,t){clearTimeout(r),r=setTimeout(function(){g({type:"SET_VOLUME",volume:parseInt(t)}),o.setVolume(t)},5)}}))))))},ie=function(e){var t=e.spotify;return l.a.createElement("div",{className:"dashboard"},l.a.createElement("div",{className:"dashboard_body"},l.a.createElement(k,{spotify:t}),l.a.createElement(H,{spotify:t})),l.a.createElement(se,{spotify:t}))},ue=new p.a,me=function(){var e=N(),t=Object(u.a)(e,2),a=t[0].token,c=t[1];return Object(n.useEffect)(function(){var e=window.localStorage.getItem("token");e||(e=window.location.hash.substring(1).split("&").reduce(function(e,t){var a=t.split("=");return e[a[0]]=decodeURIComponent(a[1]),e},{}).access_token,window.history.pushState({},null,"/"),e&&(ue.setAccessToken(e),window.localStorage.setItem("token",e),c({type:"SET_TOKEN",token:e}))),ue.setAccessToken(e),c({type:"SET_TOKEN",token:e}),ue.getMe().then(function(e){c({type:"SET_USER",user:e})})},[c]),l.a.createElement("div",{className:"app"},a?l.a.createElement(ie,{spotify:ue}):l.a.createElement(E,null))},Ee=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,150)).then(function(t){var a=t.getCLS,n=t.getFID,l=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),l(e),c(e),r(e)})},de=a(11),pe=function(e,t){switch(console.log(t),t.type){case"SET_USER":return Object(de.a)(Object(de.a)({},e),{},{user:t.user});case"SET_TOKEN":return Object(de.a)(Object(de.a)({},e),{},{token:t.token});case"SET_PLAYLISTS":return Object(de.a)(Object(de.a)({},e),{},{playlists:t.playlists});case"SET_SELECTED_PLAYLIST":return Object(de.a)(Object(de.a)({},e),{},{selected_playlist:t.selected_playlist});case"SET_DISCOVER_WEEKLY":return Object(de.a)(Object(de.a)({},e),{},{discover_weekly:t.discover_weekly});case"SET_SELECTED_TRACK":return Object(de.a)(Object(de.a)({},e),{},{track:t.track});case"SET_PLAYING":return Object(de.a)(Object(de.a)({},e),{},{playing:t.playing});case"SET_VOLUME":return Object(de.a)(Object(de.a)({},e),{},{volume:t.volume});case"SET_PLAY_CONTEXT":return Object(de.a)(Object(de.a)({},e),{},{play_context:t.play_context});case"SET_INDEX":return Object(de.a)(Object(de.a)({},e),{},{index:t.index});case"SET_SHUFFLE_STATE":return Object(de.a)(Object(de.a)({},e),{},{shuffle:t.shuffle});case"SET_REPEAT_STATE":return Object(de.a)(Object(de.a)({},e),{},{repeat:t.repeat});case"SET_SEARCH_RESULTS":return Object(de.a)(Object(de.a)({},e),{},{search_results:t.search_results});default:return e}};r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(h,{initialState:{user:null,playlists:[],discover_weekly:null,token:null,spotify:null,loading:!0,index:null,volume:null},reducer:pe},l.a.createElement(me,null))),document.getElementById("root")),Ee()},98:function(e,t,a){e.exports=a(121)}},[[98,1,2]]]);
//# sourceMappingURL=main.fa31007c.chunk.js.map